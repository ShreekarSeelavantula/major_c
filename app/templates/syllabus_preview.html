{% extends "layout.html" %}

{% block title %}Syllabus Preview | Prep Genie{% endblock %}

{% block content %}

<h2 class="fw-bold mb-2">Syllabus Preview</h2>
<p class="text-muted mb-3">
    Extracted from <strong>{{ syllabus.filename }}</strong>
</p>

<div class="card shadow-sm mb-4">
    <div class="card-body">

        <h5 class="fw-semibold mb-2">
            Extracted Text Preview (First 3 Pages)
        </h5>

        <p class="text-muted mb-3">
            Please verify that the extracted text looks like a syllabus before continuing.
        </p>

        <pre style="
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
        ">
{{ syllabus.preview_text or "No text could be extracted." }}
        </pre>

        {% if not syllabus.validated %}
            <form method="post"
                  action="/syllabus/validate/{{ syllabus._id }}"
                  class="d-flex justify-content-end mt-4">
                <button type="submit" class="btn btn-success">
                    Validate syllabus →
                </button>
            </form>
        {% else %}
            <div class="alert alert-success mt-4">
                Syllabus validated successfully. Processing full document…
            </div>
        {% endif %}

    </div>
</div>

<div class="d-flex justify-content-start">
    <a href="/upload" class="btn btn-outline-secondary">
        Re-upload
    </a>
</div>

{% endblock %}
